<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../../static/css/signup.css" th:href="@{/css/signup.css}">
  <script src="https://code.jquery.com/jquery-3.6.4.min.js" integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>
  <title>íšŒì›ê°€ì…</title>
</head>
<body>
<form id="frm" action="" method="post" th:object="${joinForm}">
<div class="wrap">
  <div class="header">
    <div class="wrapper">
      <!--íŒ€ì¥ë‹˜ ì½”ë“œ -->
      <!-- Header  -->
      <header>
        <div class="top">
          <div class="logo">
<!--            <img src="/img/black-yagiyo.png" alt="" src="/" />-->
          </div>
          <div class="search_box">
            <input
                class="searchbar"
                type="text"
                placeholder="ì˜ì–‘ì œ ì„±ë¶„ ê²€ìƒ‰ì„ í•´ë³´ì„¸ìš”ğŸ’Š ! "
            />
            <div class="search_btn">
<!--              <img src="/img/search_div_icn.png" alt="" />-->
            </div>
          </div>
          <nav class="gnb_box">
            <a href="">AIë¶„ì„</a>
            <a href="">ì»¤ë®¤ë‹ˆí‹°</a>
            <a href="">ì•½êµ­ì •ë³´</a>
            <a href="">ë¡œê·¸ì¸</a>
          </nav>
        </div>
      </header>
    </div>
  </div>
  <!-- íŒ€ì¥ë‹˜ ì½”ë“œ -->
<div class="main">
    <div th:if="${#fields.hasGlobalErrors()}">
      <p th:each="err:${#fields.globalErrors()}" th:text="${err}"></p>
    </div>
    <!---->
    <div class="container">
      <div class="container_title"><h2>íšŒì›ê°€ì…</h2></div>
      <div class="container_contents">

          <label for="id" class="container_contents_item">ì•„ì´ë””</label>
        <input
            placeholder="ì˜ë¬¸,ìˆ«ìë¥¼ ì´ìš©í•´ ë§Œë“¤ì–´ì£¼ì„¸ìš”(6~15ìë‚´ì™¸)"
            class="container_contents_item_input"
            type="text"
            id="id"
            th:field="*{id}"
        />
        <span class="error"></span>
        <span th:errors="*{id}"></span>
        <div id="idError" class="continer_contents_error"></div>



        <label for="pw" class="container_contents_item">ë¹„ë°€ë²ˆí˜¸</label>
        <input
            placeholder="ëŒ€ì†Œë¬¸ìêµ¬ë¶„ ì˜ë¬¸ì, ìˆ«ìì¡°í•©ìœ¼ë¡œ ì ì–´ì£¼ì„¸ìš” (8~20ì)"

            class="container_contents_item_input"
            type="password"
            th:field="*{pw}"

        />
        <span class="error"></span>
        <span th:errors="*{pw}"></span>
        <div id="pwError" class="continer_contents_error"></div>
        <label for="pw_check" class="container_contents_item"
        >ë¹„ë°€ë²ˆí˜¸í™•ì¸</label
        >
        <input
            id="pw_check"
            name="pw_check"
            class="container_contents_item_input"
            type="password"
        />
        <div id="pwChkError" class="continer_contents_error"></div>
        <label for="nick" class="container_contents_item">ë‹‰ë„¤ì„</label>
        <input
            placeholder="ì˜ë¬¸ì, ìˆ«ì, í•œê¸€ì¡°í•©ìœ¼ë¡œ ì ì–´ì£¼ì„¸ìš” (10ê¸€ìë‚´ì™¸)"
            th:field="*{nick}"
            class="container_contents_item_input"
            type="text"
        />
        <div id="nickError" class="continer_contents_error"></div>

        <label for="email" class="container_contents_item">ì´ë©”ì¼</label>
        <div>
          <input
              required
              type="email"
              th:field="*{email}"
              id="email"
              class="container_contents_item_input"
          />
          <label for="emailSelect">
            <form id="emailSelectForm">
              <select
                  id="emailSelect"
                  name="emailSelect"
                  class="container_contents_email"
              >
                <option id="directInput" value="directInput">
                  @ì§ì ‘ì…ë ¥
                </option>
                <option id="naver" value="naver">@naver.com</option>
                <option id="gmail" value="gmail">@gmail.com</option>
                <option id="daum" value="daum">@daum.net</option>
              </select>
            </form>
          </label>

<!--          ì´ë©”ì¼ ì¸ì¦ í•˜ê¸°-->

          <div class="form-group last mb-4 email_input">
            <label for="memail" id="mailTxt">ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”</label>
            <input type="text" class="form-control" name="memail" id="memail">
          </div>
          <!-- <span>ì´ë©”ì¼ ì¸ì¦ë²ˆí˜¸</span> -->
          <button class="btn btn-outline-primary" type="button" id="checkEmail">ì¸ì¦ë²ˆí˜¸</button>


          <div class="form-group last mb-4 check_input">
            <label for="memailconfirm" id="memailconfirmTxt">ì¸ì¦ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</label>
            <input type="text" class="form-control" id="memailconfirm">
          </div>
<!--          ì´ë©”ì¼ ì¸ì¦ í•˜ê¸° ë-->

          <button onclick="startTimer()" disabled id="codeBtn">
            ì¸ì¦ì½”ë“œë°›ê¸°
          </button>
        </div>
        <div id="emailError" class="continer_contents_error"></div>
        <div class="div">
          <a
              target="_blank"
              rel="noreferrer noopener"
              href="https://www.google.com/"
          >
            <img
                class="icon_google"
                src="https://cdn-icons-png.flaticon.com/32/270/270014.png"
                alt=""
            />
          </a>
          <a
              target="_blank"
              rel="noreferrer noopener"
              href="https://www.naver.com/"
          >
            <img
                class="icon_naver"
                src="https://littledeep.com/wp-content/uploads/2020/09/naver-icon-style.png"
                alt=""
            />
          </a>
          <a
              target="_blank"
              rel="noreferrer noopener"
              href="https://www.daum.net/"
          >
            <img
                class="icon_daum"
                src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT7trxHzrmqrmvjMoL9lHx4ZpoMuW9nYtSSB4b9zTs&s"
                alt=""
            />
          </a>
          <div class="timer">
            <div hidden id="timeLimit">03:00</div>
            <button hidden disabled id="completion">ì¸ì¦ì™„ë£Œ</button>
          </div>
        </div>

        <label for="gender" class="container_contents_item"
        >ì„±ë³„ (ì„ íƒ)</label
        >
        <form action="gender" id="gender">
          <input
              disabled
              type="radio"
              class="container_contents_item"
              name="gender"
              unchecked=""
              value="man"
              id="man"
          />
          <label for="man" class="container_contents_item">'ë‚¨'</label>
          <input
              disabled
              type="radio"
              class="container_contents_item"
              name="gender"
              value="women"
              id="women"
          />
          <label for="women" class="container_contents_item">'ì—¬'</label>
        </form>
        <label for="age" class="container_contents_item">ë‚˜ì´ (ì„ íƒ)</label>
        <input
            disabled
            min="1950-01"
            max="2023-03"
            type="month"
            class="container_contents_item_input"
            th:field="*{age}"
        />
      </div>
      <div>
        <input id="checkboxAgree" disabled type="checkbox" />
        <span class="container_contents_agree"
        ><a
            id="agreeUrl"
            target="agreeUrl"
            th:href="@{/members/Agree}">
        [í•„ìˆ˜] ì„œë¹„ìŠ¤ì˜ ì´ìš©ì•½ê´€ ë™ì˜</a
        ></span
        >
      </div>
      <br />
      <div>
        <input id="checkboxIdentity" disabled type="checkbox" />

        <span class="container_contents_identity"
        ><a
            id="identityUrl"
            target="identityUrl"
            th:href="@{/members/Identity}">
          [í•„ìˆ˜] ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨ ë™ì˜</a
        ></span
        >
      </div>

      <div>
        <button
            disabled
            id="finishBtn"
            type="submit"
            class="container_contents_submitBtn"
        >
          íšŒì›ê°€ì…
        </button>
        <button class="container_contents_cancelBtn">ì·¨ì†Œ</button>
      </div>
    </div>
</div>
</div>
  </form>
<script type="text/javascript" th:src="@{../js/signup.js}"></script>
<script th:inline="javascript">

  // ì´ë©”ì¼ ì¸ì¦ë²ˆí˜¸

const $checkEmail = $('#checkEmail');

$('#checkEmail').click(function() {
  $.ajax({
    type: "POST",
    url: "/members/mailConfirm",
    data: {
      "email": $('#memail').val()
    },
    success: function(data) {
      alert("í•´ë‹¹ ì´ë©”ì¼ë¡œ ì¸ì¦ë²ˆí˜¸ ë°œì†¡ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. \n í™•ì¸ë¶€íƒë“œë¦½ë‹ˆë‹¤.");
      console.log("data : " + data);
      var code = data; // ì„œë²„ì—ì„œ ì „ë‹¬ë°›ì€ ì¸ì¦ì½”ë“œ
      console.log("ì¸ì¦ì½”ë“œ : " + code);
      chkEmailConfirm(data);
    },
    error: function(jqXHR, textStatus, errorThrown) {
      console.error("There was a problem with the AJAX request:", textStatus, errorThrown);
    }
  });
});

function chkEmailConfirm(data) {
  const $memailconfirm = $('#memailconfirm');
  const $memailconfirmTxt = $('#memailconfirmTxt');

  $memailconfirm.on('input', function() {
    console.log("ë˜ëƒ : " + $memailconfirm.val());
    if (data !== $memailconfirm.val()) {
      $memailconfirmTxt.html("<span id='emconfirmchk'>ì¸ì¦ë²ˆí˜¸ê°€ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤</span>").find("#emconfirmchk").css({
        "color": "#FA3E3E",
        "font-weight": "bold",
        "font-size": "10px"
      });
    } else {
      $memailconfirmTxt.html("<span id='emconfirmchk'>ì¸ì¦ë²ˆí˜¸ í™•ì¸ ì™„ë£Œ</span>").find("#emconfirmchk").css({
        "color": "#0D6EFD",
        "font-weight": "bold",
        "font-size": "10px"
      });
    }
  });
}


</script>
</body>


</html>
